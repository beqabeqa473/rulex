		     СЛОВАРЬ РУССКИХ ПРОИЗНОШЕНИЙ

Словарь русских произношений RuLex предназначен в первую очередь для
совместного использования с синтезатором речи Ru_tts. После его
установки достаточно добавлять в строку вызова Ru_tts ключ
"-s /usr/local/lib/ru_tts/lexicon" и содержимое словаря будет
приниматься во внимание при синтезе речи.


Формат исходного текста словаря.

Каждое вхождение представляет собою одну строку, состоящую из двух
полей: Собственно слово и его произношение. Ударная гласная отмечается
знаком "+" непосредственно после нее. Можно использовать также знак
"=" для обозначения так называемых слабых ударений там, где это
представляется целесообразным, например, в некоторых составных
словах. Поля отделены друг от друга одним пробелом.

Чтобы скомпилировать словарь, то есть преобразовать его к виду,
пригодному для использования синтезатором, достаточно выдать команду

make lexicon

Makefile достаточно примитивен и обозрим, но все же я позволю себе
дать здесь несколько намеков как использовать этот материал для
пополнения и совершенствования словаря.

Предполагается, что незнакомые слова синтезатор скидывает в файл
/var/log/unknown.words. Их рекомендуется извлекать при помощи команды

make additions

При этом в текущем каталоге образуется файл по имени additions.raw,
содержащий заготовки новых словарных статей, в которых оба поля имеют
совершенно одинаковое содержание. Если окружение содержит непустую
переменную EDITOR, то этот файл предлагается отредактировать при
помощи заявленного в ней редактора, после чего файл переименовывается
в additions. Если переменная EDITOR пуста или просто отсутствует в
окружении, то процесс завершается с ошибкой. Тем не менее, файл
additions.raw остается в рабочем каталоге. Его можно просмотреть при
помощи любого удобного текстового редактора, удалить лишние вхождения
и отредактировать соответствующим образом второе поле, а затем вручную
переименовать в additions. После этого, новые слова вводятся в
основной словарь при помощи команды

make new

Предыдущая версия словаря при этом сохраняется в файле
lexicon.dict.old. А теперь можно выдать команду

make lexicon

для компиляции обновленного словаря. При компиляции могут возникать
замечания о повторных вхождениях. Ничего страшного в них нет, - на
самом деле всегда используется лишь первое, - но все же я бы
рекомендовал обращать на них внимание и принимать соответствующие
меры.

Команда

make

или

make all

Выполняет всю описанную работу целиком: извлекает новые слова из
/var/log/unknown.words, предлагает отредактировать заготовки словарных
статей, вносит новый материал в словарь и компилирует его. При
извлечении новых слов файл /var/log/unknown.words очищается. Для этого
файла должны быть установлены права на чтение и запись для тех
пользователей, от имени которых предполагается с ним работать.

И, наконец, установить обновленный словарь на его законное место можно, посредством команды

make install

Это, разумеется, следует уже делать от имени пользователя root.


А теперь немного истории.

Этот словарь, собственно, возник изначально как реализация моей мечты
вставить расстановку ударений в Ru_tts. Поиски подходящего словаря
ударений в интернете к успеху, увы, не привели. Но тут я вдруг
вспомнил, что свободно распространяемый в электронном виде
англо-русский словарь Мюллера в одном из своих вариантов содержал
расстановку ударений во всех русских словах. Я извлек этот материал и
получил немногим более 60000 вхождений. Это было уже что-то, хотя, как
оказалось, не слишком густо. Тем не менее, жизнеспособность идеи уже
можно было как-то оценить.

А дальше начался длительный процесс доводки. Ряд слов пришлось
исключить, так как ударение в них зависит от контекста, например,
"окна", "слова" и тому подобное. Далее оказалось, что ударениями здесь
дело отнюдь не ограничивается. Например, такая штука, как "счастливый
мужчина". Вылез и еще целый ряд тонкостей.

Разумеется, я вполне отдаю себе отчет, что и сейчас все это весьма
далеко от желанного совершенства, но все же уже, пожалуй, можно
вынести на суд широкой общественности. По крайней мере, то, как Ru_tts
работает с использованием этого словаря, мне нравится заметно больше,
чем то, что было до того.


Теперь же я хочу выразить глубочайшую благодарность тем, кто не
поленился расставить ударения в словаре Мюллера, а также склонить
голову в благодарном поклоне Иванову Геннадию Григорьевичу и своей
сестренке Татьяне, которые самоотверженно взяли на себя львиную долю самой
черновой технической работы по корректировке и пополнению словаря.

Не могу так же не выразить глубокую признательность Сергею Флейтину за
новые слова и замечания и, разумеется, Дмитрию Падучих, который не
только прислал мне немало новых слов, но и разработал некий механизм,
позволяющий несколько автоматизировать процесс их генерации, который я
тоже включаю в состав данного дистрибутива. Вот пояснения Дмитрия к
этому механизму:

Я написал небольшую моду для Emacs, чтобы редактировать словари
произношений. Главной её особенностью является то, что можно
"перемножать" кусочки слов. То есть, находясь в этой моде, можно
вызвать буфер, ввести там выражение, например:

ба+лк | а и е у ой е и ам ами ах

а Emacs затем вставит в буфер словаря:

балка ба+лка
балкам ба+лкам
балками ба+лками
балках ба+лках
балке ба+лке
балки ба+лки
балкой ба+лкой
балку ба+лку

Ещё один пример:

вы* по | нё+с пё+р | . ся

вынес вы+нес
вынесся вы+несся
выпер вы+пер
выперся вы+перся
понес понё+с
понесся понё+сся
попер попё+р
поперся попё+рся

Чтобы установить, скопируйте rulex.el в директорию, которая есть в
load-path, и скомпилируйте его там.
Затем в ~/.emacs можно ещё добавить:

(autoload 'rlex-mode "rulex" nil 'interactive)
(add-to-list 'auto-mode-alist '("\\.rle?x\\'" . rlex-mode))

чтобы файлы с расширением .rlex и .rlx открывались в rlex-mode.


Для компиляции словаря используется программка, взятая из Freephone,
которую я, правда, слегка модифицировал, тоже не без чувства
благодарности к ее первоначальному автору.

Воизбежание неувязок, связанных с различными версиями библиотек в
Linux, я помещаю здесь статически скомпилированный исполняемый файл
этой программы.


Порецкий Игорь, Санкт-Петербург, <root@goga.energo.ru>
